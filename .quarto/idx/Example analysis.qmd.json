{"title":"Example analysis","markdown":{"yaml":{"title":"Example analysis","author":[{"name":"Zixu Luo","affiliation":"Department of Biostatistics, Johns Hopkins"}],"description":"Data analysis example of Project 1","date":"2024-11-08","knitr":true,"draft":false,"bibliography":"references.bib"},"headingText":"Age is an important confounder","containsRefs":false,"markdown":"\n\nFor the data analysis, I choose to use a built-in dataset in R called `esoph`. This is a case-control study of (o)esophageal cancer in Ille-et-Vilaine, France.[@Breslow] The data frame contain the following variables:\n\n| *Variable name* | *What it refers*    |\n|-----------------|---------------------|\n| `agegp`         | Age group           |\n| `alcgp`         | Alcohol consumption |\n| `tobgp`         | Tobacco consumption |\n| `ncases`        | Number of cases     |\n| `ncontrols`     | Number of controls  |\n\nThe question that we can aim to answer with the data is the association between alcohol & tobacco consumption and the probability of getting esophageal cancer. The intended audiences for the data analysis are both researchers on that cancer and the corresponding clinical staff.\n\n![](images/EsophagusCancer.jpg){fig-align=\"center\" width=\"158\"}\n\n```{r}\ndata <- esoph\nhead(data, 15)\n```\n\n\nFirst we can take a look at the age distribution of the study population, and the different patterns for alcohol & tobacco consumption of the young and the old. From the bar plot it can be concluded that in this sample the distribution of tobacco consumption is almost consistent in each age group, indicating that this is a balanced study design.\n\n```{r}\nlibrary(ggplot2)\nlibrary(dplyr)\n\n# a bar plot showing the consumption of tobacco in different age groups\nggplot(data, aes(x = agegp, y = ncases + ncontrols, fill = tobgp)) +\n  geom_bar(stat = \"identity\", position = \"dodge\") +\n  labs(title = \"Bar plot revealing the relationship between age and tobacco consumption\",\n       x = \"age\", y = \"number of participants\",\n       subtitle=\"Age is roughly balanced at different tobacco level.\",\n       caption = \"Plot by Zixu\") +\n  theme_minimal() +\n  theme(plot.title = element_text(hjust = 0.5, face = \"bold\"),\n        plot.subtitle = element_text(hjust = 0.5))\n\n```\n\nSimilarly, it can be found that there is a slightly unbalanced trend between age and alcohol consumption.\n\n\n```{r}\n\n# a bar plot showing the consumption of alcohol in different age groups\nggplot(data, aes(x = agegp, y = ncases + ncontrols, fill = alcgp)) +\n  geom_bar(stat = \"identity\", position = \"dodge\") +\n  labs(title = \"Bar plot revealing the relationship between age and alcohol consumption\",\n       x = \"age\", y = \"number of participants\",\n       subtitle=\"Middle-aged people are more likely to abuse alcohol.\",\n       caption = \"Plot by Zixu\") +\n  theme_minimal() +\n  theme(plot.title = element_text(hjust = 0.5, face = \"bold\"),\n        plot.subtitle = element_text(hjust = 0.5))\n\n\n```\n\nThe proportion of cases gets higher as people grow older. However those aged 75+ have a lower proportion of cases than those aged 55-74 and it may be due to the small sample size.\n\n```{r fig.width = 4, fig.height = 4}\ntemp <- summarize(group_by(data, agegp),\n                  case_proportion = sum(ncases)/ (sum(ncases) + sum(ncontrols)))\n\nggplot(temp, aes(x = agegp, y = case_proportion, group = 1)) +\n  geom_point(size = 2) +\n  labs(title = \"Trend of the proportion of cases\\nas people grow older\",\n       x = \"age\", y = \"proportion of cases\",\n       caption = \"Plot by Zixu\")\n\n```\n\n## Alcohol and esophageal cancer\n\nWhat if we take alcohol consumption into consideration before looking into the relationship between age and case proportion? This could be accomplished by dividing the sample into 4 alcohol groups and draw 4 lines separately.\n\n\n```{r}\n\ntemp <- summarize(group_by(data, agegp, alcgp),\n                  case_proportion = sum(ncases)/ (sum(ncases) + sum(ncontrols)))\n\n\nggplot(temp, aes(x = agegp, y = case_proportion, group = alcgp, colour = alcgp)) +\n  geom_line(linewidth = 0.8) +\n  labs(title = \"Trend of the proportion of cases as people grow older,\\nconditioning on the level of alcohol consumption\",\n       subtitle = \"Higher alcohol consumption leads to worse disease outcome.\",\n       x = \"age\", y = \"proportion of cases\",\n       caption = \"Plot by Zixu\") +\n  theme(plot.title = element_text(hjust = 0.5, face = \"bold\"),\n        plot.subtitle = element_text(hjust = 0.5))\n\n\n```\n\nComparing the 4 alcohol groups, it seems like when an individual drinks a lot (120+), he or she may have already had a significantly higher incidence rate even at a very young age. For those moderate drinkers, only when they reach 50 or 60 years old is there a significantly higher incidence rate than the non-drinkers.\n\n::: {.callout-note}\nAlcohol exerts a bad health effect!\n(I get help of the construction of a callout block from [@callout].)\n:::\n\n\n\n## Tobacco and esophageal cancer\n\nUsing a type of faceting (`facet_wrap()`), the effect of tobacco consumption can be identified conditioned on alcohol consumption. Here I filter the sample, only focusing on those older than 44 years old.\n\n```{r}\n\ntemp <- summarize(group_by(filter(data, !agegp %in% unique(data$agegp)[1:2]),\n                           alcgp, tobgp),\n                  n1 = sum(ncases),\n                  n2 = sum(ncontrols))\ntemp <- mutate(temp,\n               case_proportion = n1 / (n1 + n2) )\n\n\nggplot(select(temp, -n1, -n2), aes(x = tobgp, y = case_proportion)) +\n  geom_bar(stat = \"identity\", position = \"dodge\") +\n  facet_wrap(~alcgp, nrow = 1) +\n  labs(title = \"Relationship between the proportion of cases\\nand the level of tobacco consumption\",\n       subtitle = \"Four facets correspond to different alcohol consumption.\",\n       x = \"tobacco consumption\", y = \"proportion of cases\",\n       caption = \"Plot by Zixu\") +\n  theme(plot.title = element_text(hjust = 0.5, face = \"bold\"),\n        plot.subtitle = element_text(hjust = 0.5),\n        axis.text.x = element_text(angle = 45, hjust = 1))\n\n\n\n```\n\n```{r}\n#| label: Margin figures\n#| fig-cap: \"Corresponding result without filtering the young subjects below 45 years old.\"\n#| column: margin\n\ntemp <- summarize(group_by(data, alcgp, tobgp),\n                  case_proportion = sum(ncases) / (sum(ncases) + sum(ncontrols)) )\n\nggplot(temp, aes(x = tobgp, y = case_proportion)) +\n  geom_bar(stat = \"identity\", position = \"dodge\") +\n  facet_wrap(~alcgp, nrow = 1) +\n  labs(title = \"Relationship between the proportion of cases\\nand the level of tobacco consumption\",\n       subtitle = \"Four facets correspond to different alcohol consumption.\",\n       x = \"tobacco consumption\", y = \"proportion of cases\",\n       caption = \"Plot by Zixu\") +\n  theme(plot.title = element_text(hjust = 0.5, face = \"bold\"),\n        plot.subtitle = element_text(hjust = 0.5),\n        axis.text.x = element_text(angle = 45, hjust = 1))\n```\n\n\nIt can be concluded that except those who abuses alcohol, more tobacco consumption is associated with higher risk of esophageal cancer.\n\nIn summary, both alcohol and tobacco have a adverse effect on esophageal cancer. However, the extent of their bad effects can be influenced by age. Generally the elderly are more vulnerable to the harmful impact of alcohol and tobacco. Moreover, there is also a significant interaction between alcohol and tobacco.\n\n\n::: {.callout-note}\nTobacco exerts a bad health effect!\n:::\n\n\n# Functions I used from each of the package\n\ndplyr: `summarize`,`group_by`, `mutate`, `filter`, `select` [@dplyr]\n\nggplot2: `geom_bar`, `geom_point`, `geom_line`\n\n\n\n\n\n```{r}\n\n```\n\n\n\n\n\n```{r}\n\n```\n\n\n\n\n\n\n```{r}\n\n```\n\n\n\n\n\n```{r}\n\n```\n\n\n\n\n\n\n```{r}\n\n```\n\n\n\n\n\n```{r}\n\n```\n\n\n\n\n\n\n```{r}\n\n```\n\n\n\n\n\n\n```{r}\n\n```\n\n\n\n\n\n\n```{r}\n\n```\n\n\n\n\n\n```{r}\n\n```\n\n\n\n\n\n\n```{r}\n\n```\n\n\n\n\n\n\n```{r}\n\n```\n\n\n\n\n\n\n```{r}\n\n```\n\n\n\n\n\n\n```{r}\n\n```\n\n\n\n\n\n```{r}\n\n```\n\n\n\n\n\n```{r}\n\n```\n\n\n\n\n","srcMarkdownNoYaml":"\n\nFor the data analysis, I choose to use a built-in dataset in R called `esoph`. This is a case-control study of (o)esophageal cancer in Ille-et-Vilaine, France.[@Breslow] The data frame contain the following variables:\n\n| *Variable name* | *What it refers*    |\n|-----------------|---------------------|\n| `agegp`         | Age group           |\n| `alcgp`         | Alcohol consumption |\n| `tobgp`         | Tobacco consumption |\n| `ncases`        | Number of cases     |\n| `ncontrols`     | Number of controls  |\n\nThe question that we can aim to answer with the data is the association between alcohol & tobacco consumption and the probability of getting esophageal cancer. The intended audiences for the data analysis are both researchers on that cancer and the corresponding clinical staff.\n\n![](images/EsophagusCancer.jpg){fig-align=\"center\" width=\"158\"}\n\n```{r}\ndata <- esoph\nhead(data, 15)\n```\n\n## Age is an important confounder\n\nFirst we can take a look at the age distribution of the study population, and the different patterns for alcohol & tobacco consumption of the young and the old. From the bar plot it can be concluded that in this sample the distribution of tobacco consumption is almost consistent in each age group, indicating that this is a balanced study design.\n\n```{r}\nlibrary(ggplot2)\nlibrary(dplyr)\n\n# a bar plot showing the consumption of tobacco in different age groups\nggplot(data, aes(x = agegp, y = ncases + ncontrols, fill = tobgp)) +\n  geom_bar(stat = \"identity\", position = \"dodge\") +\n  labs(title = \"Bar plot revealing the relationship between age and tobacco consumption\",\n       x = \"age\", y = \"number of participants\",\n       subtitle=\"Age is roughly balanced at different tobacco level.\",\n       caption = \"Plot by Zixu\") +\n  theme_minimal() +\n  theme(plot.title = element_text(hjust = 0.5, face = \"bold\"),\n        plot.subtitle = element_text(hjust = 0.5))\n\n```\n\nSimilarly, it can be found that there is a slightly unbalanced trend between age and alcohol consumption.\n\n\n```{r}\n\n# a bar plot showing the consumption of alcohol in different age groups\nggplot(data, aes(x = agegp, y = ncases + ncontrols, fill = alcgp)) +\n  geom_bar(stat = \"identity\", position = \"dodge\") +\n  labs(title = \"Bar plot revealing the relationship between age and alcohol consumption\",\n       x = \"age\", y = \"number of participants\",\n       subtitle=\"Middle-aged people are more likely to abuse alcohol.\",\n       caption = \"Plot by Zixu\") +\n  theme_minimal() +\n  theme(plot.title = element_text(hjust = 0.5, face = \"bold\"),\n        plot.subtitle = element_text(hjust = 0.5))\n\n\n```\n\nThe proportion of cases gets higher as people grow older. However those aged 75+ have a lower proportion of cases than those aged 55-74 and it may be due to the small sample size.\n\n```{r fig.width = 4, fig.height = 4}\ntemp <- summarize(group_by(data, agegp),\n                  case_proportion = sum(ncases)/ (sum(ncases) + sum(ncontrols)))\n\nggplot(temp, aes(x = agegp, y = case_proportion, group = 1)) +\n  geom_point(size = 2) +\n  labs(title = \"Trend of the proportion of cases\\nas people grow older\",\n       x = \"age\", y = \"proportion of cases\",\n       caption = \"Plot by Zixu\")\n\n```\n\n## Alcohol and esophageal cancer\n\nWhat if we take alcohol consumption into consideration before looking into the relationship between age and case proportion? This could be accomplished by dividing the sample into 4 alcohol groups and draw 4 lines separately.\n\n\n```{r}\n\ntemp <- summarize(group_by(data, agegp, alcgp),\n                  case_proportion = sum(ncases)/ (sum(ncases) + sum(ncontrols)))\n\n\nggplot(temp, aes(x = agegp, y = case_proportion, group = alcgp, colour = alcgp)) +\n  geom_line(linewidth = 0.8) +\n  labs(title = \"Trend of the proportion of cases as people grow older,\\nconditioning on the level of alcohol consumption\",\n       subtitle = \"Higher alcohol consumption leads to worse disease outcome.\",\n       x = \"age\", y = \"proportion of cases\",\n       caption = \"Plot by Zixu\") +\n  theme(plot.title = element_text(hjust = 0.5, face = \"bold\"),\n        plot.subtitle = element_text(hjust = 0.5))\n\n\n```\n\nComparing the 4 alcohol groups, it seems like when an individual drinks a lot (120+), he or she may have already had a significantly higher incidence rate even at a very young age. For those moderate drinkers, only when they reach 50 or 60 years old is there a significantly higher incidence rate than the non-drinkers.\n\n::: {.callout-note}\nAlcohol exerts a bad health effect!\n(I get help of the construction of a callout block from [@callout].)\n:::\n\n\n\n## Tobacco and esophageal cancer\n\nUsing a type of faceting (`facet_wrap()`), the effect of tobacco consumption can be identified conditioned on alcohol consumption. Here I filter the sample, only focusing on those older than 44 years old.\n\n```{r}\n\ntemp <- summarize(group_by(filter(data, !agegp %in% unique(data$agegp)[1:2]),\n                           alcgp, tobgp),\n                  n1 = sum(ncases),\n                  n2 = sum(ncontrols))\ntemp <- mutate(temp,\n               case_proportion = n1 / (n1 + n2) )\n\n\nggplot(select(temp, -n1, -n2), aes(x = tobgp, y = case_proportion)) +\n  geom_bar(stat = \"identity\", position = \"dodge\") +\n  facet_wrap(~alcgp, nrow = 1) +\n  labs(title = \"Relationship between the proportion of cases\\nand the level of tobacco consumption\",\n       subtitle = \"Four facets correspond to different alcohol consumption.\",\n       x = \"tobacco consumption\", y = \"proportion of cases\",\n       caption = \"Plot by Zixu\") +\n  theme(plot.title = element_text(hjust = 0.5, face = \"bold\"),\n        plot.subtitle = element_text(hjust = 0.5),\n        axis.text.x = element_text(angle = 45, hjust = 1))\n\n\n\n```\n\n```{r}\n#| label: Margin figures\n#| fig-cap: \"Corresponding result without filtering the young subjects below 45 years old.\"\n#| column: margin\n\ntemp <- summarize(group_by(data, alcgp, tobgp),\n                  case_proportion = sum(ncases) / (sum(ncases) + sum(ncontrols)) )\n\nggplot(temp, aes(x = tobgp, y = case_proportion)) +\n  geom_bar(stat = \"identity\", position = \"dodge\") +\n  facet_wrap(~alcgp, nrow = 1) +\n  labs(title = \"Relationship between the proportion of cases\\nand the level of tobacco consumption\",\n       subtitle = \"Four facets correspond to different alcohol consumption.\",\n       x = \"tobacco consumption\", y = \"proportion of cases\",\n       caption = \"Plot by Zixu\") +\n  theme(plot.title = element_text(hjust = 0.5, face = \"bold\"),\n        plot.subtitle = element_text(hjust = 0.5),\n        axis.text.x = element_text(angle = 45, hjust = 1))\n```\n\n\nIt can be concluded that except those who abuses alcohol, more tobacco consumption is associated with higher risk of esophageal cancer.\n\nIn summary, both alcohol and tobacco have a adverse effect on esophageal cancer. However, the extent of their bad effects can be influenced by age. Generally the elderly are more vulnerable to the harmful impact of alcohol and tobacco. Moreover, there is also a significant interaction between alcohol and tobacco.\n\n\n::: {.callout-note}\nTobacco exerts a bad health effect!\n:::\n\n\n# Functions I used from each of the package\n\ndplyr: `summarize`,`group_by`, `mutate`, `filter`, `select` [@dplyr]\n\nggplot2: `geom_bar`, `geom_point`, `geom_line`\n\n\n\n\n\n```{r}\n\n```\n\n\n\n\n\n```{r}\n\n```\n\n\n\n\n\n\n```{r}\n\n```\n\n\n\n\n\n```{r}\n\n```\n\n\n\n\n\n\n```{r}\n\n```\n\n\n\n\n\n```{r}\n\n```\n\n\n\n\n\n\n```{r}\n\n```\n\n\n\n\n\n\n```{r}\n\n```\n\n\n\n\n\n\n```{r}\n\n```\n\n\n\n\n\n```{r}\n\n```\n\n\n\n\n\n\n```{r}\n\n```\n\n\n\n\n\n\n```{r}\n\n```\n\n\n\n\n\n\n```{r}\n\n```\n\n\n\n\n\n\n```{r}\n\n```\n\n\n\n\n\n```{r}\n\n```\n\n\n\n\n\n```{r}\n\n```\n\n\n\n\n"},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":"auto","echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"ipynb-shell-interactivity":null,"plotly-connected":true,"engine":"knitr"},"render":{"keep-tex":false,"keep-typ":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-min-runs":1,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[],"notebook-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","css":["styles.css"],"toc":true,"output-file":"Example analysis.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","other-links-title":"Other Links","code-links-title":"Code Links","launch-dev-container-title":"Launch Dev Container","launch-binder-title":"Launch Binder","article-notebook-label":"Article Notebook","notebook-preview-download":"Download Notebook","notebook-preview-download-src":"Download Source","notebook-preview-back":"Back to Article","manuscript-meca-bundle":"MECA Bundle","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","title-block-keywords":"Keywords","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","tools-share":"Share","tools-download":"Download","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-text-placeholder":"","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-wordcount":"Word Count","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items","listing-page-words":"{0} words"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.4.555","editor":"visual","theme":"Darkly","title":"Example analysis","author":[{"name":"Zixu Luo","affiliation":"Department of Biostatistics, Johns Hopkins"}],"description":"Data analysis example of Project 1","date":"2024-11-08","knitr":true,"draft":false,"bibliography":["references.bib"]},"extensions":{"book":{"multiFile":true}}}},"projectFormats":["html"]}